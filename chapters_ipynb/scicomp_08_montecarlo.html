
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>8. Monte Carlo &#8212; Introduction to Computation for the Physics Sciences</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters_ipynb/scicomp_08_montecarlo';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="9. Manipulating tabular data with Pandas" href="scicomp_09_pandas.html" />
    <link rel="prev" title="7. Simulating solutions to differential equations" href="scicomp_07_ODEs.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/wj_horiz_color.png" class="logo__image only-light" alt="Introduction to Computation for the Physics Sciences - Home"/>
    <img src="../_static/wj_horiz_color.png" class="logo__image only-dark pst-js-only" alt="Introduction to Computation for the Physics Sciences - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">I. Python basics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="scicomp_00_basics.html">1. Basic syntax, variables, functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="scicomp_01_controlstructs.html">2. Control structures, numerical integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="scicomp_02_typescontainers.html">3. Types, random numbers, lists, dictionaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="scicomp_03_fileio.html">4. File I/O</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">II. Techniques for the physical sciences</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="scicomp_04_datavis.html">5. Data visualization with <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="scicomp_05_fitting.html">6. Fitting models to data</a></li>
<li class="toctree-l1"><a class="reference internal" href="scicomp_07_ODEs.html">7. Simulating solutions to differential equations</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">8. Monte Carlo</a></li>
<li class="toctree-l1"><a class="reference internal" href="scicomp_09_pandas.html">9. Manipulating tabular data with <code class="docutils literal notranslate"><span class="pre">Pandas</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="scicomp_10_pandas_magic.html">10. Data reduction and analysis magic with <code class="docutils literal notranslate"><span class="pre">Pandas</span></code></a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">III. Optional (but fun)</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="scicomp_06_textasdata.html">11. Text as data</a></li>
<li class="toctree-l1"><a class="reference internal" href="scicomp_11_circuitpython.html">12. Python on microcontrollers with <code class="docutils literal notranslate"><span class="pre">circuitpython</span></code></a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">IV. Projects</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="scicomp_proj_potential_wells.html">Simulating trajectories with multiple attractors: A chaotic system?</a></li>
<li class="toctree-l1"><a class="reference internal" href="scicomp_proj_z0_ll_analysis.html">Di-lepton mass spectrum from the Compact Muon Solenoid</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fchapters_ipynb/scicomp_08_montecarlo.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/chapters_ipynb/scicomp_08_montecarlo.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Monte Carlo</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#recap">8.1. Recap</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#motivation">8.2. Motivation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-monte-carlo">8.3. What is Monte Carlo?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-the-monte-carlo-technique">8.4. What is the Monte Carlo technique?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#de-rigueur-example-calculating-pi-using-the-mc-method">8.5. <em>De rigueur</em> example: Calculating <span class="math notranslate nohighlight">\(\pi\)</span> using the MC method</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#warm-up-problem">Warm-up problem</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#live-example-simulating-a-multi-agent-non-deterministic-system">8.6. Live example: Simulating a multi-agent, non-deterministic system</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#our-system">Our system</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simulating-attacks">Simulating attacks</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#simulating-a-battle">Simulating a battle</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#approximating-statistical-quantities-by-simulaing-many-battles">Approximating statistical quantities by simulaing <strong>many</strong> battles</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#problems">8.7. Problems</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regulars">Regulars</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-1">Problem 1</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-2">Problem 2</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-3">Problem 3</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#meanies">Meanies</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-4">Problem 4</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-5">Problem 5</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="monte-carlo">
<h1><span class="section-number">8. </span>Monte Carlo<a class="headerlink" href="#monte-carlo" title="Link to this heading">#</a></h1>
<section id="recap">
<h2><span class="section-number">8.1. </span>Recap<a class="headerlink" href="#recap" title="Link to this heading">#</a></h2>
<p>In this lesson I’m breaking the recap into two sections:</p>
<ul class="simple">
<li><p>foundational programming skills</p>
<ul>
<li><p>basic mathematical operations, comparison operators</p></li>
<li><p>iteration and recursion with loop control structures <code class="docutils literal notranslate"><span class="pre">for</span></code> and <code class="docutils literal notranslate"><span class="pre">while</span></code></p></li>
<li><p>keeping track of variables outside of loops (i.e., counting and summing)</p></li>
<li><p>function definition and using functions <em>inside</em> of loops</p></li>
<li><p>conditionals: <code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">else</span></code>, and <code class="docutils literal notranslate"><span class="pre">elif</span></code></p></li>
<li><p>types: <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">string</span></code>, <code class="docutils literal notranslate"><span class="pre">bool</span></code></p></li>
<li><p>containers such as <code class="docutils literal notranslate"><span class="pre">list</span></code> and <code class="docutils literal notranslate"><span class="pre">dict</span></code></p></li>
<li><p>randm number generation</p></li>
<li><p>accessing and iterating over elements in lists and dicts</p></li>
<li><p>file I/O</p></li>
<li><p>DEBUGGING!</p></li>
<li><p>algorithmic thinking</p></li>
</ul>
</li>
<li><p>applications</p>
<ul>
<li><p>basic (and semi-advanced) data visualization: histograms, scatter plots, higher-dimensions in 2-d</p></li>
<li><p>fitting models to data and extracting results (with uncertainties)</p></li>
<li><p>text analysis, asking questions with unstructured data</p></li>
<li><p>simulating the solutions to ordinary differential equations, Euler Algorithm</p></li>
</ul>
</li>
</ul>
<p>Yowza!  For those continuing on the physics major or minor, it’s worth noting that familiarity with the <em>foundational skills</em> will be assumed in future courses.  Some of the applications will be reinforced in future classes.</p>
</section>
<hr class="docutils" />
<section id="motivation">
<h2><span class="section-number">8.2. </span>Motivation<a class="headerlink" href="#motivation" title="Link to this heading">#</a></h2>
<p>Next we’ll explore a class of techniques referred to as “Monte Carlo” (MC).  Before we talk about what MC <em>is</em>, let’s look at a few examples of how MC is used to generate knowledge.</p>
<ul class="simple">
<li><p>The MC approach was largely developed during the so-called Manhattan Project, the US military development of nuclear weapons during World War II.  Here is a nice article about how MC was implemented to simulate the transport of neutrons through matter: Kristina Panos. <a class="reference external" href="https://hackaday.com/2015/09/11/fermiac-the-computer-that-advanced-the-manhattan-project/">FERMIAC</a></p></li>
<li><p>Daniel Fylstra. <a class="reference external" href="https://www.solver.com/press/monte-carlo-methods-led-atomic-bomb-may-be-your-best-bet-business-decision-making"><em>MONTE CARLO METHODS THAT LED TO THE ATOMIC BOMB MAY BE YOUR BEST BET FOR BUSINESS DECISION-MAKING</em></a>.  Note: I did not read this article, and I do not endorse all-caps article titles.</p></li>
<li><p>Adam Conrad. <a class="reference external" href="https://www.slideshare.net/AdamConrad2/actuarial-application-of-monte-carlo-simulation-46703744">Actuarial Application of Monte Carlo Simulation</a> Might sound like a snoozer, but some really cool examples.</p></li>
<li><p>Hlynur Davíð Hlynsson. <a class="reference external" href="https://towardsdatascience.com/monte-carlo-search-for-magic-the-gathering-6ca60750fcc6">Monte-Carlo Search for Magic: The Gathering</a></p></li>
<li><p>From the world of finance: Kushal Agarwal. <a class="reference external" href="https://www.investopedia.com/articles/investing/112514/monte-carlo-simulation-basics.asp">The Monte Carlo Simulation: Understanding the Basics</a></p></li>
<li><p>The Team Band. <a class="reference external" href="https://blaseball.com/landing">Blaseball</a></p></li>
<li><p>Bay 12 Games. <a class="reference external" href="http://www.bay12games.com/dwarves/">Drawf Fortress</a></p></li>
</ul>
<p>What feature(s) unite these applications?</p>
<p>[Instructor pauses for you to think…]</p>
<p>Monte Carlo is applied in each because the complexity or scale of the system being studied prevents us from <em><strong>knowing exactly</strong></em> what the outcomes will be.  In some of these cases, there is a probabilistic nature to how the system operates.  Monte Carlo allows us to <em>sample</em> the possible behaviors of the system and form a statistical understanding of the possible outcomes.</p>
</section>
<hr class="docutils" />
<section id="what-is-monte-carlo">
<h2><span class="section-number">8.3. </span>What is Monte Carlo?<a class="headerlink" href="#what-is-monte-carlo" title="Link to this heading">#</a></h2>
<p>The Monte Carlo Casino is a famous gambling and entertainment establishment (<em>i.e.</em>, a casino) located in the country of Monaco.  It is <em>very</em> fancy – so fancy, in fact, that James Bond has been there in <strong>two</strong> separate films.</p>
<p>Ok, thanks for coming by!  Have a great week.</p>
</section>
<hr class="docutils" />
<section id="what-is-the-monte-carlo-technique">
<h2><span class="section-number">8.4. </span>What is the Monte Carlo technique?<a class="headerlink" href="#what-is-the-monte-carlo-technique" title="Link to this heading">#</a></h2>
<p>The Monte Carlo method is a paradigm (or type of approach) to solving problems.  Like most things, the <a class="reference external" href="https://en.wikipedia.org/wiki/Monte_Carlo_method">Wikipedia</a> entry is very good if you already know what Monte Carlo is:</p>
<blockquote>
<div><p>Monte Carlo methods… are a broad class of computational algorithms that rely on repeated random sampling to obtain numerical results. The underlying concept is to use randomness to solve problems that might be deterministic in principle. They are often used in physical and mathematical problems and are most useful when it is difficult or impossible to use other approaches. Monte Carlo methods are mainly used in three problem classes: optimization, numerical integration, and generating draws from a probability distribution.</p>
</div></blockquote>
<p>Put simply, Monte Carlo is a way of studying systems or processes that are too complex, or are inherently non-deterministic, to provide definitive predictions.  A Monte Carlo analysis builds a statistical model of the behavior of a system, performs <em>many</em> simulations/trials of the system, and then generates a statistical understanding of the outcomes of the model.</p>
<p>MC isn’t <em>a</em> technique so much as it is a way of approaching certain types of problems.</p>
<p>Believe it or not, many of you have already applied the MC technique back when we introduced the concept of and syntax for random number generation.  Many MC techniques rely on random number generation to sample the possible states or behaviors of a system.</p>
<p>Let’s look at a two examples of how we can use the MC approach to generate results.</p>
</section>
<hr class="docutils" />
<section id="de-rigueur-example-calculating-pi-using-the-mc-method">
<h2><span class="section-number">8.5. </span><em>De rigueur</em> example: Calculating <span class="math notranslate nohighlight">\(\pi\)</span> using the MC method<a class="headerlink" href="#de-rigueur-example-calculating-pi-using-the-mc-method" title="Link to this heading">#</a></h2>
<p>Recall that the number <span class="math notranslate nohighlight">\(\pi\)</span> is defined as the ratio of a circle’s circumference to its diameter (in a flat space with Euclidean metric…).  <span class="math notranslate nohighlight">\(\pi\)</span> is WILD! It is a transcendental number; <em>i.e.</em>, it’s not the root of a finite polynomial with rational coefficients, and it can’t be expressed as a fraction.  It pops up in many unexpected places in the mathematical and physical sciences!  We previously approximated <span class="math notranslate nohighlight">\(\pi\)</span> using several interesting infinite series.</p>
<p>Let’s imagine a world where we don’t know the numerical value of <span class="math notranslate nohighlight">\(\pi\)</span>.  How would we go about <em>measuring</em> it?  We could make many, many, many circles, measure their diameters and circumferences, calculate the ratio for each, and perhaps average or fit… But it’s probably unfeasible to carefully fabricate many very precise circles.</p>
<p>Here is another way to measure (or approximate) the value of <span class="math notranslate nohighlight">\(\pi\)</span>.  Recall that the area of a circle with unit radius is <span class="math notranslate nohighlight">\(\pi (1)^2 = \pi\)</span>.  Let’s picture a circle with radius <span class="math notranslate nohighlight">\(1\)</span> drawn inside a square with side length <span class="math notranslate nohighlight">\(2\)</span>, both centered at the origin in the <span class="math notranslate nohighlight">\(x\)</span>-<span class="math notranslate nohighlight">\(y\)</span> plane.  We’ll let the square occupy the region with <span class="math notranslate nohighlight">\(x\in [-1, 1]\)</span> and <span class="math notranslate nohighlight">\(y\in[-1, 1]\)</span>.  Your instructor will draw this figure on the board, or you can scroll down to the visualization below.</p>
<p>Now imagine throwing <span class="math notranslate nohighlight">\(N\)</span> darts at this figure in such a way that each dart lands with a random <span class="math notranslate nohighlight">\((x, y)\)</span> position somewhere inside the square.  Some number of these darts, <span class="math notranslate nohighlight">\(N_c\)</span>, will land inside the circle.  If the <span class="math notranslate nohighlight">\((x, y)\)</span> positions of the darts are truly randomly distributed inside the square, we expect that the probability of a dart landing in the circle, <span class="math notranslate nohighlight">\(p_c\)</span>, is equal to the fraction of the total area that is inside the circle:</p>
<div class="amsmath math notranslate nohighlight" id="equation-b95c8f1b-dc19-43ce-9c09-bf53b16ae1f8">
<span class="eqno">(8.1)<a class="headerlink" href="#equation-b95c8f1b-dc19-43ce-9c09-bf53b16ae1f8" title="Permalink to this equation">#</a></span>\[\begin{equation} 
  p_c = \frac{A_c}{A} = \frac{\pi}{2^2} = \frac{\pi}{4} 
\end{equation}\]</div>
<p>It is important to note that if we don’t know a value for <span class="math notranslate nohighlight">\(\pi\)</span>, <strong>this probability is unknown to us</strong>.  We can’t calculate it from other quantities; rather, we need some way to measure it!  This is a feature common to many MC applications – there is some important probability (or probability distribution) that we don’t know, but that we want to know.</p>
<p>We will “measure” this probability by <strong>sampling</strong>!  (Note: We are going to do this with code, but you could totally do the same approximation with real darts on a real [not-college-owned] wall.)  We will randomly generate <span class="math notranslate nohighlight">\(N\)</span> positions in the square, observe how many of these (<span class="math notranslate nohighlight">\(N_c\)</span>) fall within the circle, and then approximate</p>
<div class="amsmath math notranslate nohighlight" id="equation-316b48fa-6a83-49f0-9179-d9c7e52e16e0">
<span class="eqno">(8.2)<a class="headerlink" href="#equation-316b48fa-6a83-49f0-9179-d9c7e52e16e0" title="Permalink to this equation">#</a></span>\[\begin{equation}
  p_c = \frac{\pi}{4} \approx \frac{N_c}{N} \implies \pi \approx 4\frac{N_c}{N}
\end{equation}\]</div>
<p>It’s important to note that this approximation is APPROXIMATE!  Since <span class="math notranslate nohighlight">\(\pi\)</span> is transcendental, it cannot be expressed as a fraction, and thus there are NO values of <span class="math notranslate nohighlight">\(N_c\)</span> and <span class="math notranslate nohighlight">\(N\)</span> that will make the equality perfect.  However, the more we sample (the larger <span class="math notranslate nohighlight">\(N\)</span> is), the better (on average) our approximate should be.</p>
<p>Here’s a little animation so that we’re on the same page:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.animation</span> <span class="k">as</span> <span class="nn">animation</span>

<span class="n">xs</span><span class="p">,</span> <span class="n">ys</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">xs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">ys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">autoscale_on</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">circle1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Circle</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">circle1</span><span class="p">)</span>
<span class="n">thisx</span><span class="p">,</span> <span class="n">thisy</span> <span class="o">=</span> <span class="n">xs</span><span class="p">,</span> <span class="n">ys</span>
<span class="n">scat</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">thisx</span><span class="p">,</span> <span class="n">thisy</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="n">thisx</span> <span class="o">=</span> <span class="n">xs</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">thisy</span> <span class="o">=</span> <span class="n">ys</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">scat</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">thisx</span><span class="p">,</span> <span class="n">thisy</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">scat</span><span class="p">,</span>

<span class="n">ani</span> <span class="o">=</span> <span class="n">animation</span><span class="o">.</span><span class="n">FuncAnimation</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">animate</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="mi">99</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="c1"># ani.save(&#39;pi.mp4&#39;) # you can uncomment this line to produce a short movie of the process!</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/9b487ba192cb5fab2d79435a1687edace64c11376abc84a8e0696061f543b65c.png" src="../_images/9b487ba192cb5fab2d79435a1687edace64c11376abc84a8e0696061f543b65c.png" />
</div>
</div>
<p>All we need now is some way to determine whether a random <span class="math notranslate nohighlight">\((x, y)\)</span> point is inside the circle.  Hmmmm.</p>
<p>Let’s code it up!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">radius</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">n</span> <span class="o">=</span> <span class="mf">1e5</span>
<span class="n">n_samples</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">n_c</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">pi_vals</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">n_vals</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">while</span> <span class="n">n_samples</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">n_samples</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">**</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="n">radius</span><span class="o">**</span><span class="mi">2</span><span class="p">:</span>
        <span class="n">n_c</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">approx_pi</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">n_c</span> <span class="o">/</span> <span class="n">n_samples</span>
    <span class="k">if</span> <span class="n">n_samples</span> <span class="o">%</span> <span class="mi">10000</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After&quot;</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">,</span> <span class="s2">&quot;samples our approximation of </span><span class="se">\u03C0</span><span class="s2"> is&quot;</span><span class="p">,</span> <span class="n">approx_pi</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n_samples</span> <span class="o">%</span> <span class="mi">10000</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">pi_vals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">approx_pi</span><span class="p">)</span>
        <span class="n">n_vals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n_samples</span><span class="p">)</span>
        
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">n_vals</span><span class="p">,</span> <span class="n">pi_vals</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;number of samples&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;approximate value of $\pi$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>After 10000 samples our approximation of π is 3.14
After 20000 samples our approximation of π is 3.1468
After 30000 samples our approximation of π is 3.139866666666667
After 40000 samples our approximation of π is 3.1422
After 50000 samples our approximation of π is 3.1412
After 60000 samples our approximation of π is 3.1430666666666665
After 70000 samples our approximation of π is 3.1406285714285715
After 80000 samples our approximation of π is 3.13795
After 90000 samples our approximation of π is 3.1404
After 100000 samples our approximation of π is 3.14172
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;&gt;:25: SyntaxWarning: invalid escape sequence &#39;\p&#39;
&lt;&gt;:25: SyntaxWarning: invalid escape sequence &#39;\p&#39;
/var/folders/6s/cpr1t_711kj905fk6qjplyrw0000gr/T/ipykernel_53223/2303121305.py:25: SyntaxWarning: invalid escape sequence &#39;\p&#39;
  plt.ylabel(&#39;approximate value of $\pi$&#39;)
</pre></div>
</div>
<img alt="../_images/1cb054e49f87887e7e981f78f28c5b362914a356f70d65ac9b1c862f54e2e19d.png" src="../_images/1cb054e49f87887e7e981f78f28c5b362914a356f70d65ac9b1c862f54e2e19d.png" />
</div>
</div>
<p>Notice that as <code class="docutils literal notranslate"><span class="pre">n_samples</span></code> (the equivalent of <span class="math notranslate nohighlight">\(N\)</span> from above) increases, the approximation generally gets closer to the actual value of <span class="math notranslate nohighlight">\(\pi\)</span>.</p>
<p>Please run the code block above several times and notice that you get a different final approximation value each time!  This is because the sampling process is <strong>random</strong>.  When I run the code several times with <span class="math notranslate nohighlight">\(10^5\)</span> samples, the approximation is surprisingly unstable!</p>
<p>Change the block of code above to perform <span class="math notranslate nohighlight">\(10^7\)</span> samples.  Is your final value a better or worse approximation?  On average it should be better!</p>
<section id="warm-up-problem">
<h3>Warm-up problem<a class="headerlink" href="#warm-up-problem" title="Link to this heading">#</a></h3>
<p>Tinker with the code above to determine how many samples are necessary to <em>reliably</em> give you an approximation accurate to 5 digits.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## warm-up code goes here</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<p>To reiterate, the above example is a situation where we want to know approximate the value of a quantitiy that <em>has a specific value</em>.  <span class="math notranslate nohighlight">\(\pi\)</span> is a well defined quantitiy!  Next, we’ll apply the MC method to better understand a semi-complex system in which the interaction of several non-deterministic agents makes understanding outcomes very complicated.</p>
</section>
</section>
<hr class="docutils" />
<section id="live-example-simulating-a-multi-agent-non-deterministic-system">
<h2><span class="section-number">8.6. </span>Live example: Simulating a multi-agent, non-deterministic system<a class="headerlink" href="#live-example-simulating-a-multi-agent-non-deterministic-system" title="Link to this heading">#</a></h2>
<p>In this example, we’ll use random number generation to simulate the behavior of a turn-based strategy role-playing game to form a statistical understanding of the game’s outcomes.</p>
<section id="our-system">
<h3>Our system<a class="headerlink" href="#our-system" title="Link to this heading">#</a></h3>
<p>Two adventurers, Alcamriel (A) Beladrinian (B) encounter a Vampiric Illithid (V) in the Underdark.  (I have now exhausted all of my D&amp;D knowledge.  What follows will be a very simplified model of battle.)</p>
<p>A begins battle with 260 HP.  B begins battle with 290 HP.  V begins battle with 345 HP.  In each round of battle, the charaters take successive turns attacking their foes: V attacks either A or B; A and B attack V.  Each character’s attacks follow the rules below:</p>
<ul class="simple">
<li><p>A does random damage between 10 and 20 with a 20% change of missing</p></li>
<li><p>B does random damage between 15 and 25 with a 35% chance of missing</p></li>
<li><p>V attacks A or B with equal probability, does random damage between 60 and 100 with a 45% chance of missing</p></li>
</ul>
<p>Each attack’s damage decreases the oppononent’s HP, and when a character’s HP reaches zero they are… ya know, done battling.  While the individual character’s actions are important, <strong>it is the interaction between these multiple agents that determines the outcome of the battle.</strong></p>
<p>What are the chances that our heroes (A and B) will win this battle?  This is a tricky question, and answering it gets into all kinds of tricky philosophical territory about interpretations of probability and statistics…  We’re not going to go there.</p>
</section>
<section id="simulating-attacks">
<h3>Simulating attacks<a class="headerlink" href="#simulating-attacks" title="Link to this heading">#</a></h3>
<p>Let’s first act this out in real time.  We need volunteers for A, B, and V.  We’ll also need a Dungeon Master to keep track of turns and HP.</p>
<p>In a normal role-playing game the randomness of attacks and damage would be determined by dice rolls.  We will use code in the cell below to simulate the characters’ attacks for each turn.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## character A</span>
<span class="n">strike_A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span>
<span class="n">damage_A</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">if</span> <span class="n">strike_A</span> <span class="o">&gt;</span> <span class="mf">0.20</span><span class="p">:</span>
    <span class="n">damage_A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;A deals&quot;</span><span class="p">,</span> <span class="n">damage_A</span><span class="p">,</span> <span class="s2">&quot;damage to V&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;A misses!&quot;</span><span class="p">)</span>
    
<span class="c1">## character B</span>
<span class="n">strike_B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span>
<span class="n">damage_B</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">if</span> <span class="n">strike_B</span> <span class="o">&gt;</span> <span class="mf">0.35</span><span class="p">:</span>
    <span class="n">damage_B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">26</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;B deals&quot;</span><span class="p">,</span> <span class="n">damage_B</span><span class="p">,</span> <span class="s2">&quot;damage to V&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;B misses!&quot;</span><span class="p">)</span>
    
<span class="c1">## character V</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">])</span>
<span class="n">out_text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">out_text</span> <span class="o">+=</span> <span class="s2">&quot;V attacks &quot;</span> <span class="o">+</span> <span class="n">target</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span>
<span class="n">strike_V</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span>
<span class="n">damage_V</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">if</span> <span class="n">strike_V</span> <span class="o">&gt;</span> <span class="mf">0.45</span><span class="p">:</span>
    <span class="n">damage_V</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">out_text</span> <span class="o">+=</span> <span class="s2">&quot; dealing &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">damage_V</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; damage!&quot;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">out_text</span> <span class="o">+=</span> <span class="s2">&quot; but misses!&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">out_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A misses!
B deals 24 damage to V
V attacks B... but misses!
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<p>Playing through a few battles, you can see that the outcomes are pretty unstable!  The code above provides the machinery for performing a battle, but it doesn’t provide us with any <strong>high-level understanding</strong> of battle.  For example, if we are A or B, there are many questions that we might wish to know <em>before</em> we engage the Vampiric Illithid in battle:</p>
<ul class="simple">
<li><p>What is the average damage done by A per turn?  B?</p></li>
<li><p>What is the probability that we can vanquish V?</p></li>
<li><p>What is the probability that A will survive battle?  B?</p></li>
<li><p>What is the probability that only A or B will survive batte?  Both?</p></li>
<li><p>How long (on average) does a battle last?  How many turns will each character take?</p></li>
</ul>
<p>A few of these may be easy to answer (the first one) because they don’t rely on the <em>interaction</em> of the agents.  However, the other questions are difficult because of the interaction!</p>
<section id="simulating-a-battle">
<h4>Simulating a battle<a class="headerlink" href="#simulating-a-battle" title="Link to this heading">#</a></h4>
<p>Let’s now build a simulation of a single battle that uses the attack rules above.  We will essentially be adding code to play the role of the Dungeon Master.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## battle code goes here.</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<p>Great!  (I am assuming that worked.)  The outcome of the code above is the result of a <strong>single</strong> battle.  Because the actions of the agents in the battle is random, this will NOT suffice as a statistical understanding of the risks involved in engaging V!</p>
<p>In the lingo of Monte Carlo, the simulated battle above is merely a <strong>single sampling</strong> of the behavior of the system.  To really do a MC analysis, we need to simulate <strong>many</strong> individual battles and aggregate the results.</p>
</section>
<section id="approximating-statistical-quantities-by-simulaing-many-battles">
<h4>Approximating statistical quantities by simulaing <strong>many</strong> battles<a class="headerlink" href="#approximating-statistical-quantities-by-simulaing-many-battles" title="Link to this heading">#</a></h4>
<p>So, as our last step, let’s simulate 1000 battles and calculate the fraction of times that V is victorious.  (Afterall, if A or B survive they can always cast a revivify spell on any deceased allies, duhhhhhhhh.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## MC analysis code goes here</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<hr class="docutils" />
<section id="problems">
<h2><span class="section-number">8.7. </span>Problems<a class="headerlink" href="#problems" title="Link to this heading">#</a></h2>
<p>Your homework is to complete three (3) of the following problems.</p>
<section id="regulars">
<h3>Regulars<a class="headerlink" href="#regulars" title="Link to this heading">#</a></h3>
<section id="problem-1">
<h4>Problem 1<a class="headerlink" href="#problem-1" title="Link to this heading">#</a></h4>
<p>Perform a Monte Carlo analysis to estimate the probablility that in a group of 20 people, at least two people share a birthday.  Assume that births are equally likely on all dates.  You can ignore leap years.</p>
</section>
<section id="problem-2">
<h4>Problem 2<a class="headerlink" href="#problem-2" title="Link to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">numpy.random.normal()</span></code> function generates random numbers from a gaussian/normal/bell-curve distribution.  The snippet <code class="docutils literal notranslate"><span class="pre">std_dev</span> <span class="pre">*</span> <span class="pre">numpy.random.normal()</span> <span class="pre">+</span> <span class="pre">mean</span></code> will generate a random value from a gaussian distribution with supplied values of standard deviation (<code class="docutils literal notranslate"><span class="pre">std_dev</span></code>) and mean.  Assume that the mean and standard deviations for heights of Icelandic women are 168 cm and 8.0 cm, respectively.  Perform a Monte Carlo simulation to estimate the probability that a randomly-chosen group 5 Icelandic women will include at least three that are taller than 180 cm.</p>
</section>
<section id="problem-3">
<h4>Problem 3<a class="headerlink" href="#problem-3" title="Link to this heading">#</a></h4>
<p>You are a casino owner.  You love to take people’s money, but you are dissatisfied by how complicated most casino games are.  You design a simple game in which a player rolls 5 six-sided dice, and gets a score by adding the three largest values (discarding the two lower values).  If the player’s score is over some threshhold value <span class="math notranslate nohighlight">\(S\)</span>, they win!  Perform a Monte Carlo analysis to estimate the average score in this game.  Next determine what you should set <span class="math notranslate nohighlight">\(S\)</span> to be such that players will win about 30% of attempts.</p>
</section>
</section>
<section id="meanies">
<h3>Meanies<a class="headerlink" href="#meanies" title="Link to this heading">#</a></h3>
<section id="problem-4">
<h4>Problem 4<a class="headerlink" href="#problem-4" title="Link to this heading">#</a></h4>
<p>The <a class="reference external" href="https://en.wikipedia.org/wiki/Bradley%E2%80%93Terry_model">Bradley-Terry model</a> gives a simple way to model the outcome of a contest between two players or teams.  We’ll simplify it further by stating the model in the following way: If teams A and B have previous win percentages <span class="math notranslate nohighlight">\(p_A\)</span> and <span class="math notranslate nohighlight">\(p_B\)</span>, respectively, then the probability that A will defeat B in a contest is</p>
<div class="amsmath math notranslate nohighlight" id="equation-c1c71c60-5df8-4948-a8d1-4db25b660864">
<span class="eqno">(8.3)<a class="headerlink" href="#equation-c1c71c60-5df8-4948-a8d1-4db25b660864" title="Permalink to this equation">#</a></span>\[\begin{equation}
\textrm{Pr}(\textrm{A defeats B}) = \frac{p_A}{p_A + p_B}
\end{equation}\]</div>
<p>Assume that a sports league has four teams, A through D, with previous win percentages 0.45, 0.5, 0.5, and 0.6, respectively.  During the season, each team plays every other 4 times.  Perform a Monte Carlo analysis to estimate the probability that the worst team ends the season with the largest number of wins.  How is this probability affected if the teams are matched 8 times during the season?</p>
</section>
<section id="problem-5">
<h4>Problem 5<a class="headerlink" href="#problem-5" title="Link to this heading">#</a></h4>
<p>You stand before an infinitely large horizontal plane, upon which are drawn parallel lines spaced a distance <span class="math notranslate nohighlight">\(\ell\)</span> apart.  You drop a needle with length <span class="math notranslate nohighlight">\(\ell\)</span> onto the plane.  The needle’s position and orientation once it comes to rest are random and uncorrelated.  Use a Monte Carlo simulation to determine the probability that the needle lands such it crosses one of the lines.  (Hint: Your plane probably doesn’t need to be infinitely large in the simulation.)</p>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "executablebooks/jupyter-book",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters_ipynb"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="scicomp_07_ODEs.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">7. </span>Simulating solutions to differential equations</p>
      </div>
    </a>
    <a class="right-next"
       href="scicomp_09_pandas.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">9. </span>Manipulating tabular data with <code class="docutils literal notranslate"><span class="pre">Pandas</span></code></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#recap">8.1. Recap</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#motivation">8.2. Motivation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-monte-carlo">8.3. What is Monte Carlo?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-the-monte-carlo-technique">8.4. What is the Monte Carlo technique?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#de-rigueur-example-calculating-pi-using-the-mc-method">8.5. <em>De rigueur</em> example: Calculating <span class="math notranslate nohighlight">\(\pi\)</span> using the MC method</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#warm-up-problem">Warm-up problem</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#live-example-simulating-a-multi-agent-non-deterministic-system">8.6. Live example: Simulating a multi-agent, non-deterministic system</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#our-system">Our system</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simulating-attacks">Simulating attacks</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#simulating-a-battle">Simulating a battle</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#approximating-statistical-quantities-by-simulaing-many-battles">Approximating statistical quantities by simulaing <strong>many</strong> battles</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#problems">8.7. Problems</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regulars">Regulars</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-1">Problem 1</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-2">Problem 2</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-3">Problem 3</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#meanies">Meanies</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-4">Problem 4</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-5">Problem 5</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Mike McCracken
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>